use samagi;
CREATE TABLE PriceAnnouncement(	priceAnnouncementId VARCHAR(10) NOT NULL PRIMARY KEY,priceAnnouncementDate DATE,effectDate DATE);
CREATE TABLE Model(modelId VARCHAR(10) NOT NULL PRIMARY KEY,modelName VARCHAR(100));
CREATE TABLE BikeModel(	bikeModelId VARCHAR(10) NOT NULL PRIMARY KEY,	modelId VARCHAR(10),	priceAnnouncementId VARCHAR(10),	bikeOption VARCHAR(100),	capacity INT,	commision DECIMAL(10,2),	netAmount DECIMAL(10,2),	note VARCHAR(200),	helmet INT,	jacket INT,	CONSTRAINT FOREIGN KEY(priceAnnouncementId) REFERENCES PriceAnnouncement(priceAnnouncementId)	ON DELETE CASCADE ON UPDATE CASCADE);
CREATE TABLE Batch(batchId VARCHAR(10) NOT NULL PRIMARY KEY,consignmentNoteNo VARCHAR(100),orderRequestNo VARCHAR(100),	transportInvoiceNo VARCHAR(100),batchDate DATE,transportOrderNo VARCHAR(100),note VARCHAR(300),userId VARCHAR(100),	helmet INT,	warrantyManual INT,sideMirror INT,jacket INT,toolKit INT,manual INT,contactNo VARCHAR(100),vehicleNo VARCHAR(100),driverName VARCHAR(100),helperName VARCHAR(100));
CREATE TABLE Stock(batchId VARCHAR(10),modelId VARCHAR(10),roundNo VARCHAR(10) NOT NULL PRIMARY KEY,engineNo VARCHAR(100),	stateName VARCHAR(100),isSold INT,	remark VARCHAR(300),	chassisNo VARCHAR(100),	note VARCHAR(300),	colour VARCHAR(100)	);
CREATE TABLE BikeOption(	optionId INT AUTO_INCREMENT PRIMARY KEY,optionName varchar(100));
CREATE TABLE Colour(colourId INT AUTO_INCREMENT PRIMARY KEY,colourName varchar(100));
CREATE TABLE Customer(	customerId VARCHAR(10) NOT NULL PRIMARY KEY,	customerName VARCHAR(100),nic VARCHAR(100),addressLine1 VARCHAR(100),addressLine2 VARCHAR(100),addressLine3 VARCHAR(100));
CREATE TABLE Mobile(mobileId INT AUTO_INCREMENT PRIMARY KEY,customerId VARCHAR(10),mobileNo VARCHAR(20),CONSTRAINT FOREIGN KEY(customerId) REFERENCES Customer(customerId)ON DELETE CASCADE ON UPDATE CASCADE);
CREATE TABLE HomePhone(	homePhoneId INT AUTO_INCREMENT PRIMARY KEY,customerId VARCHAR(10),homePhoneNo VARCHAR(20),CONSTRAINT FOREIGN KEY(customerId) REFERENCES Customer(customerId)ON DELETE CASCADE ON UPDATE CASCADE);
CREATE TABLE ConsignmentDealer(	specialDealerId VARCHAR(10) NOT NULL PRIMARY KEY,bikeModelId VARCHAR(10),specialPrice DECIMAL(10,2),	dealerMargine DECIMAL(10,2),	CONSTRAINT FOREIGN KEY(bikeModelId) REFERENCES BikeModel(bikeModelId)	ON DELETE CASCADE ON UPDATE CASCADE);
CREATE TABLE Payment(	paymentId VARCHAR(10) NOT NULL PRIMARY KEY,	commision DECIMAL,	bikeAmount DECIMAL,rmvAmount DECIMAL,	insuranceAmount DECIMAL,orderAmount DECIMAL,	otherPaymentAmount DECIMAL,note VARCHAR(300));
CREATE TABLE Cash(cashId VARCHAR(10) NOT NULL PRIMARY KEY,paymentId VARCHAR(10),	cashAmount DECIMAL ,cashDate DATE,	CONSTRAINT FOREIGN KEY(paymentId) REFERENCES Payment(paymentId)	ON DELETE CASCADE ON UPDATE CASCADE);
CREATE TABLE Cheque(chequeId VARCHAR(10) NOT NULL PRIMARY KEY,paymentId VARCHAR(10),checkNo VARCHAR(100),bankName VARCHAR(100),chequeDate DATE,	amount DECIMAL,stateName VARCHAR(100),issuedBy VARCHAR(100),chequeType VARCHAR(100),accountNo VARCHAR(100),note VARCHAR(100),isIssued VARCHAR(10),CONSTRAINT FOREIGN KEY(paymentId) REFERENCES Payment(paymentId)ON DELETE CASCADE ON UPDATE CASCADE);
CREATE TABLE Leasing(leasingId VARCHAR(10) NOT NULL PRIMARY KEY,paymentId VARCHAR(10),leasingAmount DECIMAL,	mta INT,mta2 INT,	mta3 INT,	do INT,	do2 INT,	idCopy INT,	gs INT,	gap INT,	garanter VARCHAR(300),	leasingName VARCHAR(100),	idPhoto INT,	snCharge VARCHAR(100),	CONSTRAINT FOREIGN KEY(paymentId) REFERENCES Payment(paymentId)ON DELETE CASCADE ON UPDATE CASCADE);
CREATE TABLE Rmv(	rmvId VARCHAR(10) NOT NULL PRIMARY KEY,	mta3 INT,	do INT,	idCopy INT,	idPhotos INT,	isLeasing INT);
CREATE TABLE Users(userId VARCHAR(10) NOT NULL PRIMARY KEY,userName VARCHAR(100),password VARCHAR(100),userType VARCHAR(100));
CREATE TABLE OrderTable(orderId VARCHAR(10) NOT NULL PRIMARY KEY,roundNo VARCHAR(10),bikeModelId VARCHAR(10),customerId VARCHAR(10),	rmvId VARCHAR(10),	userId VARCHAR(10),		paymentId VARCHAR(10),	orderTime VARCHAR(100),	orderDate DATE,	note VARCHAR(300),	orderAmount DECIMAL,	rmv INT,	insurance INT,	CONSTRAINT FOREIGN KEY(roundNo) REFERENCES Stock(roundNo)	ON DELETE CASCADE ON UPDATE CASCADE,	CONSTRAINT FOREIGN KEY(bikeModelId) REFERENCES BikeModel(bikeModelId)	ON DELETE CASCADE ON UPDATE CASCADE,	CONSTRAINT FOREIGN KEY(customerId) REFERENCES Customer(customerId)	ON DELETE CASCADE ON UPDATE CASCADE,	CONSTRAINT FOREIGN KEY(rmvId) REFERENCES Rmv(rmvId)	ON DELETE CASCADE ON UPDATE CASCADE,		CONSTRAINT FOREIGN KEY(userId) REFERENCES Users(userId)	ON DELETE CASCADE ON UPDATE CASCADE	,CONSTRAINT FOREIGN KEY(paymentId) REFERENCES Payment(paymentId)ON DELETE CASCADE ON UPDATE CASCADE);
CREATE TABLE Account(accountId INT AUTO_INCREMENT PRIMARY KEY,	accountDate DATE,description VARCHAR(400),income DECIMAL,expenditure DECIMAL);
CREATE TABLE ReturnStock(returnId VARCHAR(10) NOT NULL PRIMARY KEY,roundNo VARCHAR(10) ,note VARCHAR(300),returnDate DATE,CONSTRAINT FOREIGN KEY(roundNo) REFERENCES Stock(roundNo)ON DELETE CASCADE ON UPDATE CASCADE);
CREATE TABLE LeasingDone(leasingDoneId INT AUTO_INCREMENT PRIMARY KEY,orderId VARCHAR(10), CONSTRAINT FOREIGN KEY orderId REFERENCES OrderTable(orderId));
CREATE TABLE `notetableorder` (  `orderId` varchar(10) DEFAULT NULL,  `noteTableId` int(11) NOT NULL AUTO_INCREMENT,  `note` varchar(500) DEFAULT NULL,  `isReport` varchar(10) DEFAULT NULL,  PRIMARY KEY (`noteTableId`),  KEY `orderId` (`orderId`),  CONSTRAINT `notetableorder_ibfk_1` FOREIGN KEY (`orderId`) REFERENCES `ordertable` (`orderId`) ON DELETE CASCADE ON UPDATE CASCADE) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=latin1;
ALTER TABLE ordertable ADD isCrReceived BIT DEFAULT 0 NOT NULL;
ALTER TABLE ordertable ADD isNPlateReceived BIT DEFAULT 0 NOT NULL;
ALTER TABLE ordertable ADD crReceivedDate DATETIME;
ALTER TABLE ordertable ADD nPlateReceivedDate DATETIME;
ALTER TABLE ordertable ADD nPlateIssueDate DATETIME;
ALTER TABLE ordertable ADD cRIssueDate DATETIME